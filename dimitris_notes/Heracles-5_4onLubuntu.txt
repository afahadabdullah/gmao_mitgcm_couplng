# Instructions for running GEOS-5 (Heracles-5_4) coupled with MITgcm
# https://github.com/christophernhill/gmao_mitgcm_couplng/blob/master/dimitris_notes/Heracles-5_4onLubuntu.txt

# Set up a Lubuntu 16.04 virtual machine under VirtualBox
# Get VirtualBox from here: https://www.virtualbox.org/wiki/Downloads
# Get lubuntu-16.04.1-desktop-amd64.iso from here: https://help.ubuntu.com/community/Lubuntu/GetLubuntu
# Start VirtualBox and set-up virtual machine:
#  New
#   Name: lubuntu-16.04
#   Type: Linux
#   Version: Ubuntu (64-bit)
#   Memory size: 2048 MB
#   Hard disk: 8.00 GB
#   Hard disk file type: VDI (VirtualBox Disk Image)
#   Storage on physical hard disk: Fixed size
#  Settings
#   System/Processor
#    Processors: 4 CPUs; Execution Cap: 100%
#  Storage
#   Controller: IDE (click on circle with green plus)
#    Choose disk: Downloads/lubuntu-16.04.1-desktop-amd64.iso
#  Start

# Install Lubuntu 16.04
#  English
#  Install Lubuntu
#  English
#  Download Updates; Install third-party software
#  Erase disk and install Lubuntu
#  Los Angeles
#  English (US)
#  Your name: Heracles
#  Password: heracles
#  Log in automatically

# Packages needed for VirtualBox to run smoothly
# Menu/System Tools/LXTerminal
sudo apt install virtualbox-guest-utils
sudo apt install virtualbox-guest-dkms
sudo adduser heracles vboxsf
sudo reboot

# Additional packages needed for MITgcm and GEOS-5
sudo apt install cvs
sudo apt install make
sudo apt install gfortran
sudo apt install openmpi-bin
sudo apt install libopenmpi-dev
sudo apt install git
sudo apt install tcsh

# Install and test latest version of MITgcm
export CVSROOT=':pserver:cvsanon@mitgcm.org:/u/gcmpack'
cvs login # enter the CVS password: "cvsanon"
cvs co MITgcm_code
cvs co MITgcm/verification/testreport
cvs co MITgcm/verification/tutorial_held_suarez_cs
cvs co MITgcm/verification/global_ocean.cs32x15
cd MITgcm/verification
./testreport -j 8 -t global_ocean.cs32x15
export MPI_INC_DIR=/usr/lib/openmpi/include
./testreport -j 8 -mpi -t global_ocean.cs32x15
